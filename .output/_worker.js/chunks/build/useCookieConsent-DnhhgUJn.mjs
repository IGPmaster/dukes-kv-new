import{r as e,a0 as a,aa as t,ab as i,ac as s}from"./server.mjs";const n=e(!1),l=e({necessary:!0,analytics:!0,affiliate:!0}),r=e(!1),o=e(!1);function useCookieConsent(){const c=n,u=r,f=e(null),v=e(""),d=e(""),y=e(""),g=l,updateLobbyLinks=e=>{const a=new URLSearchParams((void 0).location.search),t=a.get("btag"),n=a.get("affid");let l=null;if(g.value.affiliate&&o.value){l=e||a.get("tracker")||i("affiliateTracker")}const r=new URLSearchParams;l&&r.set("tracker",l),t&&r.set("btag",t),n&&r.set("affid",n);const c=r.toString(),u=c?`?${c}`:"";v.value=`${s}${u}#registration`,d.value=`${s}${u}#login`,y.value=`${s}${u}#play/`},saveToLocalStorage=e=>{if(o.value){if(!e.analytics&&e.affiliate,localStorage.setItem("cookieConsent",JSON.stringify({preferences:e,timestamp:(new Date).toISOString(),version:"1.0"})),e.affiliate){const e=f.value;if(e)(e=>{if(!e||!g.value.affiliate||!o.value)return void updateLobbyLinks(null);const a=new Date;a.setDate(a.getDate()+30),(void 0).cookie=`affiliateTracker=${e}; max-age=2592000; path=/; SameSite=Strict; Secure`,updateLobbyLinks(e)})(e);else{const e=i("affiliateTracker");updateLobbyLinks(e)}}else updateLobbyLinks(null);e.analytics}};return a(g,(e=>{}),{deep:!0}),{showBanner:c,isPreferencesOpen:u,preferences:g,cookieCategories:[{id:"necessary",label:"Necessary Cookies",description:"Essential for website functionality. These cookies are required and cannot be disabled.",required:!0},{id:"analytics",label:"Analytics Cookies",description:"Help us understand how visitors interact with our website. These cookies collect anonymous information.",required:!1},{id:"affiliate",label:"Affiliate Tracking",description:"Essential for our business operations. We use a unique identifier stored for 30 days to credit our partners when you visit gaming sites. No personal data is collected.",required:!1}],handleAcceptAll:()=>{o.value=!0;const e={necessary:!0,analytics:!0,affiliate:!0};g.value=e,saveToLocalStorage(e),t(),c.value=!1},handleDeclineAll:()=>{o.value=!0;const e={necessary:!0,analytics:!1,affiliate:!1};g.value=e,saveToLocalStorage(e),t(),c.value=!1},savePreferences:()=>{o.value=!0;const e={...g.value,necessary:!0};g.value=e,saveToLocalStorage(e),t(),c.value=!1,u.value=!1},handleOpenPreferences:()=>{if(localStorage.getItem("cookieConsent"))try{const{preferences:e}=JSON.parse(localStorage.getItem("cookieConsent"));g.value={...e,necessary:!0}}catch(e){g.value={necessary:!0,analytics:!0,affiliate:!0}}else g.value={necessary:!0,analytics:!0,affiliate:!0};u.value=!0},withdrawConsent:()=>{localStorage.removeItem("cookieConsent"),g.value={necessary:!0,analytics:!1,affiliate:!1},updateLobbyLinks(null),c.value=!0},getConsentStatus:()=>{const e=localStorage.getItem("cookieConsent");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},regLink:v,loginLink:d,playLink:y}}export{useCookieConsent as u};
//# sourceMappingURL=useCookieConsent-DnhhgUJn.mjs.map
