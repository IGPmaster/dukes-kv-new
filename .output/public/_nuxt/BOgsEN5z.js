import{r as l,n as O,at as d,g as A,au as m,av as h}from"./LRQc7Xda.js";const E=l(!1),q=l({necessary:!0,analytics:!0,affiliate:!0}),G=l(!1),s=l(!1);function B(){const i=E,g=G,T=l(null),w=l(""),S=l(""),C=l(""),n=q,L=[{id:"necessary",label:"Necessary Cookies",description:"Essential for website functionality. These cookies are required and cannot be disabled.",required:!0},{id:"analytics",label:"Analytics Cookies",description:"Help us understand how visitors interact with our website. These cookies collect anonymous information.",required:!1},{id:"affiliate",label:"Affiliate Tracking",description:"Essential for our business operations. We use a unique identifier stored for 30 days to credit our partners when you visit gaming sites. No personal data is collected.",required:!1}],k=()=>typeof window>"u"||!s.value||!n.value.affiliate?null:new URLSearchParams(window.location.search).get("tracker"),r=e=>{const a=new URLSearchParams(window.location.search),o=a.get("btag"),t=a.get("affid");let c=null;n.value.affiliate&&s.value&&(c=e||a.get("tracker")||d("affiliateTracker"));const f=new URLSearchParams;c&&f.set("tracker",c),o&&f.set("btag",o),t&&f.set("affid",t);const $=f.toString(),y=$?`?${$}`:"";w.value=`${m}${y}#registration`,S.value=`${m}${y}#login`,C.value=`${m}${y}#play/`},v=e=>{if(!e||!n.value.affiliate||!s.value){r(null);return}const a=new Date;a.setDate(a.getDate()+30),document.cookie=`affiliateTracker=${e}; max-age=${30*24*60*60}; path=/; SameSite=Strict; Secure`,r(e)},b=()=>{if(typeof document>"u")return;const e=["PHPSESSID"];document.cookie.split(";").forEach(o=>{const t=o.split("=")[0].trim();e.includes(t)||(document.cookie=`${t}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,document.cookie=`${t}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`,document.cookie=`${t}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`)})},p=e=>{if(typeof window>"u")return;const a=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;(a==="1"||a==="yes")&&(e=!1),window.dataLayer&&(window.dataLayer.push({event:"consent_update",analytics_storage:e?"granted":"denied",ad_storage:e?"granted":"denied",functionality_storage:"granted",personalization_storage:e?"granted":"denied",security_storage:"granted"}),e&&s.value&&window.initializeGTM&&window.initializeGTM())},u=e=>{if(s.value){if(!e.analytics&&!e.affiliate&&b(),localStorage.setItem("cookieConsent",JSON.stringify({preferences:e,timestamp:new Date().toISOString(),version:"1.0"})),e.affiliate){const o=k()||T.value;if(o)v(o);else{const t=d("affiliateTracker");r(t)}}else r(null);p(e.analytics)}},x=()=>{s.value=!0;const e={necessary:!0,analytics:!0,affiliate:!0};n.value=e,u(e),h(),i.value=!1},P=()=>{if(typeof window>"u")return;const e=["PHPSESSID"];document.cookie.split(";").forEach(t=>{const c=t.split("=")[0].trim();e.includes(c)||(document.cookie=`${c}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,document.cookie=`${c}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=${window.location.hostname}`,document.cookie=`${c}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${window.location.hostname}`)});const o=["cookieConsent"];Object.keys(localStorage).forEach(t=>{o.includes(t)||localStorage.removeItem(t)}),sessionStorage.clear()},I=()=>{s.value=!0;const e={necessary:!0,analytics:!1,affiliate:!1};n.value=e,P(),u(e),h(),i.value=!1},M=()=>{s.value=!0;const e={...n.value,necessary:!0};n.value=e,u(e),h(),i.value=!1,g.value=!1},N=()=>{if(!localStorage.getItem("cookieConsent"))n.value={necessary:!0,analytics:!0,affiliate:!0};else try{const{preferences:e}=JSON.parse(localStorage.getItem("cookieConsent"));n.value={...e,necessary:!0}}catch{n.value={necessary:!0,analytics:!0,affiliate:!0}}g.value=!0},D=()=>{const e=localStorage.getItem("cookieConsent");if(!e)return null;try{return JSON.parse(e)}catch{return null}},J=()=>{P(),localStorage.removeItem("cookieConsent"),n.value={necessary:!0,analytics:!1,affiliate:!1},r(null),i.value=!0};return O(()=>{const e=localStorage.getItem("cookieConsent");if(e)try{const{preferences:a}=JSON.parse(e);if(s.value=!0,n.value={...a,necessary:!0},a.affiliate&&s.value){const o=k();if(o)v(o);else{const t=d("affiliateTracker");r(t)}}else r(null);p(a.analytics),i.value=!1}catch(a){console.error("Error parsing saved consent:",a),s.value=!1,n.value={necessary:!0,analytics:!0,affiliate:!0},i.value=!0,r(null)}else s.value=!1,n.value={necessary:!0,analytics:!0,affiliate:!0},r(null),i.value=!0}),A(n,e=>{if(!(typeof window>"u"))if(u(e),p(e.analytics),e.affiliate){const o=k()||T.value;if(o)v(o);else{const t=d("affiliateTracker");r(t)}}else r(null)},{deep:!0}),{showBanner:i,isPreferencesOpen:g,preferences:n,cookieCategories:L,handleAcceptAll:x,handleDeclineAll:I,savePreferences:M,handleOpenPreferences:N,withdrawConsent:J,getConsentStatus:D,regLink:w,loginLink:S,playLink:C}}export{B as u};
