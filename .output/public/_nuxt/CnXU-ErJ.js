import{_ as M}from"./DSWQP9L3.js";import{_ as N,a1 as B,r as m,n as D,c as a,a as o,b as E,w as C,t as l,C as c,z as U,d as p,a2 as H,a3 as V,W as I,E as W,o as i}from"./AuDPTbWI.js";import{u as $}from"./mZqQyYLy.js";const A={class:"pt-24 bg-gradient-to-b from-primary_bg to-tertiary_dark min-h-screen"},K={class:"container mx-auto px-4 sm:px-6 lg:px-8 pb-24"},S={key:0,class:"flex justify-center items-center min-h-[400px]"},z={key:1,class:"text-center py-12"},F={class:"max-w-md mx-auto"},q={class:"mt-6"},G={key:2,class:"max-w-4xl mx-auto"},J={class:"relative rounded-lg overflow-hidden mb-8 bg-tertiary shadow-xl bg-tertiary_dark px-10"},Q=["src","alt"],X={class:"text-center mb-8"},Y={class:"text-4xl font-bold text-primary mb-4"},Z={key:0,class:"text-gray-400 text-lg"},tt={class:"flex justify-between items-center mb-8"},et={class:"flex items-center space-x-4"},ot={key:0,class:"px-3 py-1 rounded-full text-sm font-semibold bg-primary/10 text-primary"},st={key:0,class:"text-sm text-gray-400"},rt={key:0},nt={class:"flex flex-col md:flex-row gap-6 mb-8 items-center"},at=["src","alt"],it={class:"prose prose-lg max-w-none prose-invert text-gray-50"},lt=["innerHTML"],dt={key:0,class:"bg-tertiary rounded-lg p-6 mb-8"},ct=["innerHTML"],ut={class:"flex justify-between mt-12"},mt={__name:"[slug]",setup(pt){const O=B().params.slug,t=m(null),u=m(!0),f=m(!1),v=s=>s||"/images/placeholder-promotion.jpg",_=s=>s?new Date(s).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"",g=s=>({seasonal:"Seasonal Promotion",welcome:"Welcome Offer",loyalty:"Loyalty Reward"})[s]||s;async function T(s){try{console.log("Current URL:",window.location.href),console.log("PROMOTIONS_WORKER_URL:",H),console.log("API_URL:",V);const e=`https://casino-promotions-api.tech1960.workers.dev/api/promotion/${s}?brandId=${I}&lang=${W.value||"IE"}`;if(console.log("Attempting to fetch from:",e),!s||!I)throw new Error("Missing required parameters");const r=await fetch(e);if(!r.ok){const d=await r.json().catch(()=>({}));throw console.log("Promotion fetch failed:",r.status,d),r.status===404?new Error("Promotion not found"):new Error(d.error||"Failed to fetch promotion")}const n=await r.json();if(!n||!n.title)throw new Error("Invalid promotion data received");return console.log("Promotion data:",n),n}catch(e){throw console.error("Error fetching promotion:",e),e}}D(async()=>{var s,e,r;try{u.value=!0,t.value=await T(O),$({title:((s=t.value)==null?void 0:s.title)||"Promotion",meta:[{name:"description",content:((r=(e=t.value)==null?void 0:e.content)==null?void 0:r.short_description)||"View our latest casino promotion"}]})}catch(n){f.value=!0,console.error("Failed to load promotion:",n)}finally{u.value=!1}});const j=s=>{!s||!s.title||console.log(`Claiming offer for promotion: ${s.title}`)};return(s,e)=>{var n,d,x,h,y,w,b,k,L,R,P;const r=M;return i(),a("div",A,[o("div",K,[u.value?(i(),a("div",S,e[1]||(e[1]=[o("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"},null,-1)]))):f.value?(i(),a("div",z,[o("div",F,[e[3]||(e[3]=o("svg",{class:"mx-auto h-12 w-12 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e[4]||(e[4]=o("h3",{class:"mt-2 text-lg font-medium text-gray-300"},"Promotion Not Found",-1)),e[5]||(e[5]=o("p",{class:"mt-1 text-sm text-gray-400"},"The promotion you're looking for might be expired or unavailable.",-1)),o("div",q,[E(r,{to:"/promotions",class:"text-secondary hover:text-secondary/90"},{default:C(()=>e[2]||(e[2]=[p(" Return to Promotions ")])),_:1})])])])):(i(),a("div",G,[o("div",J,[o("img",{src:v((d=(n=t.value.images)==null?void 0:n.desktop)==null?void 0:d.url),alt:((h=(x=t.value.images)==null?void 0:x.desktop)==null?void 0:h.alt)||t.value.title,class:"w-full h-auto"},null,8,Q)]),o("div",X,[o("h1",Y,l(t.value.title),1),(y=t.value.content)!=null&&y.short_description?(i(),a("p",Z,l(t.value.content.short_description),1)):c("",!0)]),o("div",tt,[o("div",et,[o("span",{class:U({"px-3 py-1 rounded-full text-sm font-semibold":!0,"bg-green-500 text-white":t.value.status==="active","bg-yellow-500 text-white":t.value.status==="scheduled","bg-gray-500 text-white":t.value.status==="expired"})},l(t.value.status),3),g(t.value.type)?(i(),a("span",ot,l(g(t.value.type)),1)):c("",!0)]),t.value.valid_from?(i(),a("div",st,[p(" Valid from: "+l(_(t.value.valid_from))+" ",1),t.value.valid_to?(i(),a("span",rt," to "+l(_(t.value.valid_to)),1)):c("",!0)])):c("",!0)]),o("div",nt,[o("img",{src:v((b=(w=t.value.images)==null?void 0:w.mobile)==null?void 0:b.url),alt:((L=(k=t.value.images)==null?void 0:k.mobile)==null?void 0:L.alt)||t.value.title,class:"w-full md:w-1/3 h-auto object-cover rounded-lg shadow-md"},null,8,at),o("div",it,[o("div",{innerHTML:(R=t.value.content)==null?void 0:R.description},null,8,lt)])]),(P=t.value.content)!=null&&P.terms?(i(),a("div",dt,[e[6]||(e[6]=o("h2",{class:"text-2xl font-bold text-primary mb-4"},"Terms & Conditions",-1)),o("div",{class:"prose prose-sm max-w-none prose-invert text-gray-50",innerHTML:t.value.content.terms},null,8,ct)])):c("",!0),o("div",ut,[E(r,{to:"/promotion",class:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-gray-300 bg-secondary hover:bg-secondary/90 transition-colors duration-200"},{default:C(()=>e[7]||(e[7]=[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),p(" Back to Promotions ")])),_:1}),o("button",{onClick:e[0]||(e[0]=vt=>j(t.value)),class:"px-6 py-3 bg-orange-500 text-white text-base font-semibold rounded-md shadow-lg hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-colors duration-200"}," Claim Offer ")])]))])])}}},ht=N(mt,[["__scopeId","data-v-257f8194"]]);export{ht as default};
